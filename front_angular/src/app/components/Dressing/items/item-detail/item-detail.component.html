<div class="container" *ngIf="!loading && item">
  <div class="header">
    <h1>{{ item.itemName }}</h1>
    <div class="actions">
      <button mat-button color="primary" [routerLink]="['/items']">
        <mat-icon>arrow_back</mat-icon> Back to Items
      </button>
      <button mat-raised-button color="accent" [routerLink]="['/items/edit', item.itemID]">
        <mat-icon>edit</mat-icon> Edit
      </button>
      <button mat-raised-button color="warn" (click)="deleteItem()">
        <mat-icon>delete</mat-icon> Delete
      </button>
    </div>
  </div>

  <div class="item-detail">
    <div class="item-image">
      <img [src]="item.imageUrl || 'assets/images/placeholder.jpg'" alt="{{ item.itemName }}">
    </div>

    <div class="item-info">
      <mat-card>
        <mat-card-content>
          <h2>Item Details</h2>

          <div class="info-row">
            <span class="info-label"><mat-icon>category</mat-icon> Category:</span>
            <span class="info-value">{{ item.category }}</span>
          </div>

          <div class="info-row">
            <span class="info-label"><mat-icon>straighten</mat-icon> Size:</span>
            <span class="info-value">{{ item.size }}</span>
          </div>

          <div class="info-row">
            <span class="info-label"><mat-icon>business</mat-icon> Brand:</span>
            <span class="info-value">{{ item.brand }}</span>
          </div>

          <div class="info-row">
            <span class="info-label"><mat-icon>palette</mat-icon> Color:</span>
            <span class="info-value">{{ item.color }}</span>
          </div>

          <div class="info-row" *ngIf="item.dateAdded">
            <span class="info-label"><mat-icon>event</mat-icon> Added On:</span>
            <span class="info-value">{{ item.dateAdded | date:'longDate' }}</span>
          </div>

          <div class="description" *ngIf="item.description">
            <h3>Description</h3>
            <p>{{ item.description }}</p>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card *ngIf="item.outfits && item.outfits.length > 0">
        <mat-card-content>
          <h2>Used in Outfits</h2>
          <div class="outfit-list">
            <div *ngFor="let outfit of item.outfits" class="outfit-item">
              <mat-icon>style</mat-icon>
              <a [routerLink]="['/outfits', outfit.outfitID]">{{ outfit.outfitName }}</a>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>

<div class="loading-container" *ngIf="loading">
  <mat-spinner diameter="60"></mat-spinner>
  <p>Loading item details...</p>
</div>
