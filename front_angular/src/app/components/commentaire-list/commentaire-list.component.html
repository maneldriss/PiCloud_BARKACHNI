<!-- Affichage du post -->
<div class="post-detail" *ngIf="post">
    <p><strong>Auteur :</strong> {{ post.user?.firstname   || 'Utilisateur inconnu' }}</p>
    <p><strong>Date :</strong> {{ post.createdAt | date:'short' }}</p>
    <h2>{{ post.title }}</h2>
    <p>{{ post.content }}</p>
    <!-- Image -->
<div *ngIf="post.imageUrl" class="post-image-container">
    <img [src]="post.imageUrl" alt="Image du post" class="post-image" style="max-width: 100%; height: auto;">
  </div>
  
  <!-- Vidéo -->
  <div *ngIf="post.videoUrl" class="post-video-container">
    <video controls style="max-width: 100%; height: auto;">
      <source [src]="post.videoUrl" type="video/mp4">
      Votre navigateur ne supporte pas la lecture de vidéos.
    </video>
  </div>
  
   
  </div>

 <!-- Formulaire d'ajout de commentaire -->
<!-- Formulaire d'ajout de commentaire -->
<div class="comment-form-container">
  <div *ngIf="isCommentFormVisible">
    <div class="textarea-container">
      <textarea [(ngModel)]="newCommentContent" placeholder="Écrivez votre commentaire..." class="comment-textarea" #commentTextarea></textarea>
      <button type="button" (click)="toggleEmojiPicker('comment')" class="btn-emoji">😊</button>
    </div>
    
    <!-- Sélecteur d'emoji pour les nouveaux commentaires -->
    <div *ngIf="showEmojiPicker && currentEmojiTarget === 'comment'" class="emoji-picker">
      <input type="text" [(ngModel)]="emojiSearch" placeholder="Rechercher un emoji..." class="search-emoji">
      <div class="emoji-tabs">
        <span class="emoji-tab" [class.active]="currentEmojiCategory === 'recent'" (click)="setEmojiCategory('recent')">🕒</span>
        <span class="emoji-tab" [class.active]="currentEmojiCategory === 'smileys'" (click)="setEmojiCategory('smileys')">😀</span>
        <span class="emoji-tab" [class.active]="currentEmojiCategory === 'animals'" (click)="setEmojiCategory('animals')">🐱</span>
        <span class="emoji-tab" [class.active]="currentEmojiCategory === 'food'" (click)="setEmojiCategory('food')">🍔</span>
        <span class="emoji-tab" [class.active]="currentEmojiCategory === 'activities'" (click)="setEmojiCategory('activities')">⚽</span>
        <span class="emoji-tab" [class.active]="currentEmojiCategory === 'travel'" (click)="setEmojiCategory('travel')">✈️</span>
      </div>
      <div class="emoji-grid">
        <span *ngFor="let emoji of filteredEmojis" (click)="addEmoji(emoji, 'comment')">{{emoji}}</span>
      </div>
    </div>
    
    <div class="comment-actions">
      <button (click)="addComment()" class="btn-submit">Publier</button>
      <button (click)="toggleCommentForm()" class="btn-cancel">Annuler</button>
    </div>
  </div>
  <button *ngIf="!isCommentFormVisible" (click)="toggleCommentForm()" class="btn-add-comment">
    Ajouter un commentaire
  </button>
</div>

  <!-- Ajoutez ceci près de votre formulaire -->
<div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
    
    <div *ngIf="badWordsDetected.length > 0">
      <p>Mots détectés :</p>
      <ul>
        <li *ngFor="let word of badWordsDetected">{{ word }}</li>
      </ul>
    </div>
  </div>
  <!-- Liste des commentaires -->
 <!-- Liste des commentaires -->
<div class="comment-section">
  <h4>Commentaires</h4>
  <div *ngFor="let commentaire of commentaires" class="comment-card" [attr.data-comment-id]="commentaire.idCommentaire">
    <div class="comment-header">
      <span class="comment-user">
        {{ commentaire.user ?  commentaire.user?.firstname : 'Anonyme' }}
      </span>
      <div class="comment-actions">
        <small class="comment-date">
          Posté le {{ commentaire.createdAt | date:'short' }}
        </small>
        <div class="action-buttons" *ngIf="commentaire.user?.id === currentUserId">
          <button (click)="startEdit(commentaire)" class="btn-edit" *ngIf="!commentaire.editing">
            <i class="edit-icon">✏️</i>
          </button>
          <button (click)="deleteComment(commentaire.idCommentaire)" class="btn-delete">
            <i class="delete-icon">🗑️</i>
          </button>
        </div>
      </div>
    </div>
    
    <div *ngIf="commentaire.editing; else viewMode">
      <div class="edit-container">
        <textarea [(ngModel)]="commentaire.updatedContent" class="edit-textarea">{{commentaire.content}}</textarea>
        <button type="button" (click)="toggleEmojiPicker('edit-' + commentaire.idCommentaire)" class="btn-emoji">😊</button>
      </div>
      
      <!-- Sélecteur d'emoji pour l'édition -->
      <div *ngIf="showEmojiPicker && currentEmojiTarget === 'edit-' + commentaire.idCommentaire" class="emoji-picker">
        <input type="text" [(ngModel)]="emojiSearch" placeholder="Rechercher un emoji..." class="search-emoji">
        <div class="emoji-tabs">
          <span class="emoji-tab" [class.active]="currentEmojiCategory === 'recent'" (click)="setEmojiCategory('recent')">🕒</span>
          <span class="emoji-tab" [class.active]="currentEmojiCategory === 'smileys'" (click)="setEmojiCategory('smileys')">😀</span>
          <span class="emoji-tab" [class.active]="currentEmojiCategory === 'animals'" (click)="setEmojiCategory('animals')">🐱</span>
          <span class="emoji-tab" [class.active]="currentEmojiCategory === 'food'" (click)="setEmojiCategory('food')">🍔</span>
          <span class="emoji-tab" [class.active]="currentEmojiCategory === 'activities'" (click)="setEmojiCategory('activities')">⚽</span>
          <span class="emoji-tab" [class.active]="currentEmojiCategory === 'travel'" (click)="setEmojiCategory('travel')">✈️</span>
        </div>
        <div class="emoji-grid">
          <span *ngFor="let emoji of filteredEmojis" (click)="addEmoji(emoji, 'edit-' + commentaire.idCommentaire)">{{emoji}}</span>
        </div>
      </div>
      
      <div class="edit-actions">
        <button (click)="saveEdit(commentaire)" class="btn-save">Enregistrer</button>
        <button (click)="cancelEdit(commentaire)" class="btn-cancel-edit">Annuler</button>
      </div>
    </div>
    
        <ng-template #viewMode>
          <p>{{ commentaire.content }}</p>
        </ng-template>
      </div>
    <ng-template #noComments>
      <p>Aucun commentaire pour ce post.</p>
    </ng-template>

  
  
  </div>
  