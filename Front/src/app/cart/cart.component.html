<div
  class="hero-wrap hero-bread"
  style="background-image: url('assets/images/bg_6.jpg')"
>
  <div class="container">
    <div
      class="row no-gutters slider-text align-items-center justify-content-center"
    >
      <div class="col-md-9 ftco-animate text-center">
        <p class="breadcrumbs">
          <span class="mr-2"><a href="index.html">Home</a></span>
          <span>Cart</span>
        </p>
        <h1 class="mb-0 bread">My Cart</h1>
      </div>
    </div>
  </div>
</div>

<section class="ftco-section ftco-cart">
  <div class="container">
    <div class="row">
      <div class="col-md-12 ftco-animate">
        <div class="cart-list">
          <table class="table table-striped">
            <thead class="thead-light">
              <tr class="text-center">
                <th></th>
                <th>Image</th>
                <th>Product</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of cart?.cartitems" class="text-center">
                <td class="product-remove">
                  <button
                    class="btn btn-danger btn-sm"
                    (click)="removeItemFromCart(item.itemID)"
                  >
                    <span class="ion-ios-close"></span> Remove
                  </button>
                </td>

                <td class="image-prod">
                  <img
                    [src]="item.product.productImageURL"
                    alt="{{ item.product.nameProduct }}"
                    class="product-image"
                  />
                </td>

                <td class="product-name">
                  <h3>{{ item.product.nameProduct }}</h3>
                  <p>{{ item.product.productDescription }}</p>
                </td>

                <td class="price">{{ item.product.productPrice }} TND</td>

                <td class="quantity">
                  <div class="input-group mb-3">
                    <button
                      class="btn btn-outline-secondary"
                      (click)="updateQuantity(item.itemID, item.quantity - 1)"
                      [disabled]="item.quantity <= 1"
                    >
                      -
                    </button>
                    <input
                      type="text"
                      class="form-control text-center"
                      [value]="item.quantity"
                      readonly
                    />
                    <button
                      class="btn btn-outline-secondary"
                      (click)="updateQuantity(item.itemID, item.quantity + 1)"
                    >
                      +
                    </button>
                  </div>
                </td>

                <td class="total">
                  {{ item.product.productPrice * item.quantity }} TND
                </td>
              </tr>

              <tr *ngIf="!cart?.cartitems?.length" class="text-center">
                <td colspan="6">Your cart is empty</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="row justify-content-start" *ngIf="cart?.cartitems?.length">
      <div class="col col-lg-5 col-md-6 mt-5 cart-wrap ftco-animate">
        <div class="cart-total mb-3">
          <h3>Cart Totals</h3>
          <hr />
          <p class="d-flex total-price">
            <span>Total</span>
            <span>{{ total }} TND</span>
          </p>
        </div>
        <button
          class="btn btn-gradient btn-lg"
          (click)="redirectToOrderForm(cart?.cartID)"
        >
          Order Now
        </button>
      </div>
    </div>
  </div>

  <!-- Spin-the-Wheel Popup -->
  <div *ngIf="showWheel" class="spin-wheel-overlay" (click)="closeWheel()">
    <div class="spin-wheel-popup" (click)="$event.stopPropagation()">
      <!-- Prevents the overlay from being clicked -->
      <app-spin-wheel></app-spin-wheel>
      <button class="close-btn" (click)="closeWheel()">Close</button>
    </div>
  </div>
</section>
